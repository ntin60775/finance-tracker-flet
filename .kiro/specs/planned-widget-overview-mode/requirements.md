# Requirements Document

## Introduction

Рефакторинг виджета плановых транзакций на главном экране для устранения дублирования функционала с панелью транзакций. Виджет плановых транзакций (левая колонка) будет преобразован в обзорный режим без кнопок действий, а все действия с плановыми операциями будут выполняться через панель транзакций (правая колонка).

## Glossary

- **Planned_Widget**: Виджет плановых транзакций в левой колонке главного экрана
- **Transactions_Panel**: Панель транзакций в правой колонке главного экрана
- **Planned_Occurrence**: Плановое вхождение (экземпляр плановой транзакции на конкретную дату)
- **Calendar_Widget**: Виджет календаря в центральной колонке
- **HomeView**: Главный экран приложения

## Requirements

### Requirement 1: Обзорный режим виджета плановых транзакций

**User Story:** Как пользователь, я хочу видеть список ближайших плановых транзакций без кнопок действий, чтобы быстро оценить предстоящие операции без визуального шума.

#### Acceptance Criteria

1. THE Planned_Widget SHALL отображать список ближайших плановых вхождений без кнопок "Исполнить" и "Пропустить"
2. THE Planned_Widget SHALL отображать для каждого вхождения: название категории, дату, сумму и статус
3. THE Planned_Widget SHALL сохранить кнопку "Показать все" в заголовке для перехода в полный раздел плановых транзакций
4. THE Planned_Widget SHALL сохранить кнопку "+" в заголовке для добавления новой плановой транзакции
5. THE Planned_Widget SHALL отображать заголовок "Плановые транзакции" с кнопками "+" и "Показать все" справа

### Requirement 2: Навигация по клику на плановое вхождение

**User Story:** Как пользователь, я хочу кликнуть на плановое вхождение в левой панели, чтобы календарь переключился на соответствующую дату и я мог выполнить действия в правой панели.

#### Acceptance Criteria

1. WHEN пользователь кликает на плановое вхождение в Planned_Widget THEN Calendar_Widget SHALL выделить дату этого вхождения
2. WHEN пользователь кликает на плановое вхождение в Planned_Widget THEN Transactions_Panel SHALL обновиться данными для даты этого вхождения
3. THE Planned_Widget SHALL визуально показывать, что элементы кликабельны (курсор, hover-эффект)

### Requirement 3: Сохранение функционала в панели транзакций

**User Story:** Как пользователь, я хочу выполнять действия с плановыми операциями (исполнить, пропустить) через панель транзакций выбранного дня, чтобы работать с операциями в контексте конкретной даты.

#### Acceptance Criteria

1. THE Transactions_Panel SHALL сохранить кнопки "Исполнить" и "Пропустить" для плановых вхождений
2. THE Transactions_Panel SHALL отображать плановые вхождения только для выбранной даты
3. WHEN пользователь исполняет или пропускает вхождение в Transactions_Panel THEN Planned_Widget SHALL обновить свой список

### Requirement 4: Визуальная индикация просроченных вхождений

**User Story:** Как пользователь, я хочу видеть просроченные плановые вхождения выделенными в обзорном виджете, чтобы быстро обратить на них внимание.

#### Acceptance Criteria

1. THE Planned_Widget SHALL визуально выделять просроченные вхождения (дата меньше текущей)
2. THE Planned_Widget SHALL показывать метку "(просрочено)" для просроченных вхождений
3. THE Planned_Widget SHALL сортировать просроченные вхождения в начале списка

### Requirement 5: Обратная совместимость

**User Story:** Как разработчик, я хочу сохранить обратную совместимость API виджета, чтобы минимизировать изменения в других частях приложения.

#### Acceptance Criteria

1. THE Planned_Widget SHALL принимать те же параметры конструктора, что и раньше
2. THE Planned_Widget SHALL игнорировать callbacks on_execute и on_skip, если они переданы
3. THE Planned_Widget SHALL добавить новый callback on_occurrence_click для обработки клика на вхождение
