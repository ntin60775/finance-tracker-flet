"""
–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–π –ª–µ–≥–µ–Ω–¥—ã.

–°–æ–¥–µ—Ä–∂–∏—Ç enum'—ã, dataclass'—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
–≤—Å–µ—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –ª–µ–≥–µ–Ω–¥–µ.

–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ —à–∏—Ä–∏–Ω—ã:
- –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ—Ü–µ–Ω–∫–∏ —à–∏—Ä–∏–Ω—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å –∑–∞–≤—ã—à–µ–Ω–Ω—ã—Ö 60-85px –¥–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö 45-56px
- –û–±—â–∞—è —Ç—Ä–µ–±—É–µ–º–∞—è —à–∏—Ä–∏–Ω–∞ —Å–Ω–∏–∂–µ–Ω–∞ —Å ~670px –¥–æ ~525px
- –°–æ–∫—Ä–∞—â–µ–Ω—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–æ—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–ª–∏–Ω—ã —Ç–µ–∫—Å—Ç–∞
"""
from dataclasses import dataclass
from enum import Enum
from typing import Union, Dict

import flet as ft


class IndicatorType(Enum):
    """–¢–∏–ø—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—è."""
    
    INCOME_DOT = "income_dot"           # –ó–µ–ª—ë–Ω–∞—è —Ç–æ—á–∫–∞ - –¥–æ—Ö–æ–¥—ã
    EXPENSE_DOT = "expense_dot"         # –ö—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ - —Ä–∞—Å—Ö–æ–¥—ã
    PLANNED_SYMBOL = "planned_symbol"   # ‚óÜ —Å–∏–º–≤–æ–ª - –ø–ª–∞–Ω–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    PENDING_SYMBOL = "pending_symbol"   # üìã —Å–∏–º–≤–æ–ª - –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
    LOAN_SYMBOL = "loan_symbol"         # üí≥ —Å–∏–º–≤–æ–ª - –ø–ª–∞—Ç–µ–∂–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º
    CASH_GAP_BG = "cash_gap_bg"         # –ñ—ë–ª—Ç—ã–π —Ñ–æ–Ω - –∫–∞—Å—Å–æ–≤—ã–µ —Ä–∞–∑—Ä—ã–≤—ã
    OVERDUE_BG = "overdue_bg"           # –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω - –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏


class DisplayMode(Enum):
    """–†–µ–∂–∏–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–µ–≥–µ–Ω–¥—ã."""
    
    AUTO = "auto"           # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
    FULL = "full"           # –ü–æ–ª–Ω–∞—è –ª–µ–≥–µ–Ω–¥–∞ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
    COMPACT = "compact"     # –°–æ–∫—Ä–∞—â—ë–Ω–Ω–∞—è –ª–µ–≥–µ–Ω–¥–∞ —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"
    MODAL_ONLY = "modal"    # –¢–æ–ª—å–∫–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ


@dataclass
class LegendIndicator:
    """–ú–æ–¥–µ–ª—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ª–µ–≥–µ–Ω–¥—ã."""
    
    type: IndicatorType
    visual_element: Union[ft.Container, ft.Text, ft.Icon]
    label: str
    description: str
    priority: int  # –î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ (1 = –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    estimated_width: int  # –ü—Ä–∏–º–µ—Ä–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö


# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—è —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏ —à–∏—Ä–∏–Ω—ã
# 
# –í–ê–ñ–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –í–ï–†–°–ò–ò –° –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø–ú–ò:
# - –í—Å–µ –æ—Ü–µ–Ω–∫–∏ —à–∏—Ä–∏–Ω—ã –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —Ç–µ–∫—Å—Ç–∞ –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
# - –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞: —à–∏—Ä–∏–Ω–∞_—ç–ª–µ–º–µ–Ω—Ç–∞ + 5px_–æ—Ç—Å—Ç—É–ø + –¥–ª–∏–Ω–∞_—Ç–µ–∫—Å—Ç–∞ * 7px_–∑–∞_—Å–∏–º–≤–æ–ª
# - –û–±—â–∞—è —ç–∫–æ–Ω–æ–º–∏—è —à–∏—Ä–∏–Ω—ã: ~145px (—Å 670px –¥–æ 525px)
# - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–∫–∏ —Å–æ–∫—Ä–∞—â–µ–Ω—ã –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
#
# –ù–æ–≤—ã–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã:
# - –¢–æ—á–µ—á–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–¥–æ—Ö–æ–¥—ã, —Ä–∞—Å—Ö–æ–¥—ã): 47-54px (–±—ã–ª–æ 60-65px)
# - –°–∏–º–≤–æ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–ø–ª–∞–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ, –∫—Ä–µ–¥–∏—Ç): 45-56px (–±—ã–ª–æ 70-85px)  
# - –§–æ–Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (—Ä–∞–∑—Ä—ã–≤, –ø—Ä–æ—Å—Ä–æ—á–∫–∞): 46-53px (–±—ã–ª–æ 70-85px)
INDICATOR_CONFIGS: Dict[IndicatorType, LegendIndicator] = {
    IndicatorType.INCOME_DOT: LegendIndicator(
        type=IndicatorType.INCOME_DOT,
        visual_element=ft.Container(
            width=10, 
            height=10, 
            border_radius=5, 
            bgcolor=ft.Colors.GREEN
        ),
        label="–î–æ—Ö–æ–¥",
        description="–ó–µ–ª—ë–Ω–∞—è —Ç–æ—á–∫–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –¥–Ω–∏ —Å –¥–æ—Ö–æ–¥–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏",
        priority=1,  # –í—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
        estimated_width=47  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 10px —ç–ª–µ–º–µ–Ω—Ç + 5px –æ—Ç—Å—Ç—É–ø + 32px —Ç–µ–∫—Å—Ç (5 —Å–∏–º–≤–æ–ª–æ–≤ * 6.4px)
    ),
    
    IndicatorType.EXPENSE_DOT: LegendIndicator(
        type=IndicatorType.EXPENSE_DOT,
        visual_element=ft.Container(
            width=10, 
            height=10, 
            border_radius=5, 
            bgcolor=ft.Colors.RED
        ),
        label="–†–∞—Å—Ö–æ–¥",
        description="–ö—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –¥–Ω–∏ —Å —Ä–∞—Å—Ö–æ–¥–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏",
        priority=2,  # –í—Ç–æ—Ä–æ–π –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ - –±–∞–∑–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        estimated_width=54  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 10px —ç–ª–µ–º–µ–Ω—Ç + 5px –æ—Ç—Å—Ç—É–ø + 39px —Ç–µ–∫—Å—Ç (6 —Å–∏–º–≤–æ–ª–æ–≤ * 6.5px)
    ),
    
    IndicatorType.PLANNED_SYMBOL: LegendIndicator(
        type=IndicatorType.PLANNED_SYMBOL,
        visual_element=ft.Text(
            "‚óÜ", 
            size=12, 
            color=ft.Colors.ORANGE, 
            weight=ft.FontWeight.BOLD
        ),
        label="–ü–ª–∞–Ω",  # –°–æ–∫—Ä–∞—â–µ–Ω–æ —Å "–ü–ª–∞–Ω–æ–≤–∞—è" –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ 28px —à–∏—Ä–∏–Ω—ã
        description="–°–∏–º–≤–æ–ª ‚óÜ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –¥–Ω–∏ —Å –ø–ª–∞–Ω–æ–≤—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏",
        priority=3,  # –¢—Ä–µ—Ç–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –ø–ª–∞–Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
        estimated_width=45  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 12px —Å–∏–º–≤–æ–ª + 5px –æ—Ç—Å—Ç—É–ø + 28px —Ç–µ–∫—Å—Ç (4 —Å–∏–º–≤–æ–ª–∞ * 7px)
    ),
    
    IndicatorType.PENDING_SYMBOL: LegendIndicator(
        type=IndicatorType.PENDING_SYMBOL,
        visual_element=ft.Text("üìã", size=12),
        label="–ñ–¥—ë—Ç",  # –°–æ–∫—Ä–∞—â–µ–Ω–æ —Å "–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–π" –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ 35px —à–∏—Ä–∏–Ω—ã
        description="–°–∏–º–≤–æ–ª üìã –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –¥–Ω–∏ —Å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏",
        priority=4,  # –ß–µ—Ç–≤—ë—Ä—Ç—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
        estimated_width=45  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 12px —Å–∏–º–≤–æ–ª + 5px –æ—Ç—Å—Ç—É–ø + 28px —Ç–µ–∫—Å—Ç (4 —Å–∏–º–≤–æ–ª–∞ * 7px)
    ),
    
    IndicatorType.LOAN_SYMBOL: LegendIndicator(
        type=IndicatorType.LOAN_SYMBOL,
        visual_element=ft.Text("üí≥", size=12),
        label="–ö—Ä–µ–¥–∏—Ç",
        description="–°–∏–º–≤–æ–ª üí≥ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –¥–Ω–∏ —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º",
        priority=5,  # –ü—è—Ç—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
        estimated_width=56  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 12px —Å–∏–º–≤–æ–ª + 5px –æ—Ç—Å—Ç—É–ø + 39px —Ç–µ–∫—Å—Ç (6 —Å–∏–º–≤–æ–ª–æ–≤ * 6.5px)
    ),
    
    IndicatorType.CASH_GAP_BG: LegendIndicator(
        type=IndicatorType.CASH_GAP_BG,
        visual_element=ft.Container(
            width=16, 
            height=12, 
            bgcolor=ft.Colors.AMBER_100,
            border_radius=2
        ),
        label="–ú–∏–Ω—É—Å",  # –°–æ–∫—Ä–∞—â–µ–Ω–æ —Å "–†–∞–∑—Ä—ã–≤" –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ 21px —à–∏—Ä–∏–Ω—ã
        description="–ñ—ë–ª—Ç—ã–π —Ñ–æ–Ω –¥–Ω—è –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞—Å—Å–æ–≤—ã–π —Ä–∞–∑—Ä—ã–≤ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑)",
        priority=6,  # –®–µ—Å—Ç–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –∫–∞—Å—Å–æ–≤—ã–µ —Ä–∞–∑—Ä—ã–≤—ã
        estimated_width=53  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 16px —ç–ª–µ–º–µ–Ω—Ç + 5px –æ—Ç—Å—Ç—É–ø + 32px —Ç–µ–∫—Å—Ç (5 —Å–∏–º–≤–æ–ª–æ–≤ * 6.4px)
    ),
    
    IndicatorType.OVERDUE_BG: LegendIndicator(
        type=IndicatorType.OVERDUE_BG,
        visual_element=ft.Container(
            width=16, 
            height=12, 
            bgcolor=ft.Colors.RED_100,
            border_radius=2,
            border=ft.border.all(1, ft.Colors.RED_700)
        ),
        label="–î–æ–ª–≥",  # –°–æ–∫—Ä–∞—â–µ–Ω–æ —Å "–ü—Ä–æ—Å—Ä–æ—á–∫–∞" –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ 28px —à–∏—Ä–∏–Ω—ã
        description="–ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω –¥–Ω—è –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º",
        priority=7,  # –°–µ–¥—å–º–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ (–Ω–∞–∏–º–µ–Ω–µ–µ —á–∞—Å—Ç—ã–µ)
        estimated_width=46  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 16px —ç–ª–µ–º–µ–Ω—Ç + 5px –æ—Ç—Å—Ç—É–ø + 25px —Ç–µ–∫—Å—Ç (4 —Å–∏–º–≤–æ–ª–∞ * 6.25px)
    )
}